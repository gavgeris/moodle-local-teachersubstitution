/**
 * Teacher Substitution Plugin - Dynamic dropdown functionality
 *
 * @package    local_teachersubstitution
 * @copyright  2025
 * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define("local_teachersubstitution/dropdowns",["jquery","core/ajax","core/notification"],(function($,Ajax,Notification){return{init:function(){var categorySelect=$("#categoryid"),courseSelect=$("#courseid"),currentTeacherSelect=$("#currentteacher"),newTeacherSelect=$("#newteacher"),submitBtn=$("#submitbtn");categorySelect.on("change",(function(){var categoryId=$(this).val();courseSelect.val("").prop("disabled",!0),currentTeacherSelect.val("").prop("disabled",!0),newTeacherSelect.val("").prop("disabled",!0),submitBtn.prop("disabled",!0),categoryId&&function(categoryId){Ajax.call([{methodname:"local_teachersubstitution_get_courses",args:{categoryid:parseInt(categoryId)},done:function(response){courseSelect.empty().append('<option value="">'+M.util.get_string("selectcourse","local_teachersubstitution")+"</option>"),response.courses&&response.courses.length>0&&($.each(response.courses,(function(index,course){courseSelect.append('<option value="'+course.id+'">'+course.fullname+"</option>")})),courseSelect.prop("disabled",!1))},fail:function(error){Notification.alert("Error","Failed to load courses: "+error.message)}}])}(categoryId)})),courseSelect.on("change",(function(){var courseId=$(this).val();currentTeacherSelect.val("").prop("disabled",!0),newTeacherSelect.val("").prop("disabled",!0),submitBtn.prop("disabled",!0),courseId&&function(courseId){Ajax.call([{methodname:"local_teachersubstitution_get_teachers",args:{courseid:parseInt(courseId)},done:function(response){currentTeacherSelect.empty().append('<option value="">'+M.util.get_string("selectcurrentteacher","local_teachersubstitution")+"</option>"),response.teachers&&response.teachers.length>0&&($.each(response.teachers,(function(index,teacher){currentTeacherSelect.append('<option value="'+teacher.username+'">'+teacher.fullname+"</option>")})),currentTeacherSelect.prop("disabled",!1))},fail:function(error){Notification.alert("Error","Failed to load teachers: "+error.message)}}])}(courseId)})),currentTeacherSelect.on("change",(function(){var courseId=courseSelect.val();newTeacherSelect.val("").prop("disabled",!0),submitBtn.prop("disabled",!0),$(this).val()&&courseId&&function(courseId){Ajax.call([{methodname:"local_teachersubstitution_get_available_teachers",args:{courseid:parseInt(courseId)},done:function(response){newTeacherSelect.empty().append('<option value="">'+M.util.get_string("selectnewteacher","local_teachersubstitution")+"</option>"),response.availableteachers&&response.availableteachers.length>0&&($.each(response.availableteachers,(function(index,teacher){newTeacherSelect.append('<option value="'+teacher.username+'">'+teacher.fullname+"</option>")})),newTeacherSelect.prop("disabled",!1))},fail:function(error){Notification.alert("Error","Failed to load available teachers: "+error.message)}}])}(courseId)})),newTeacherSelect.on("change",(function(){$(this).val()&&currentTeacherSelect.val()?submitBtn.prop("disabled",!1):submitBtn.prop("disabled",!0)})),$("#teachersubstitutionform").on("submit",(function(e){categorySelect.val()&&courseSelect.val()&&currentTeacherSelect.val()&&newTeacherSelect.val()&&$("#reason").val().trim()||(e.preventDefault(),Notification.alert("Error","Please fill in all required fields."))}))}}}));

//# sourceMappingURL=dropdowns.min.js.map